
#include <drivers/lan9252.h>

LAN9252::LAN9252(
		Port::SPIComm 	&spi,
		Port::CS 		&cs,
		Port::EXIT 		&spiIrq,
		Port::EXIT 		&sync0,
		Port::EXIT 		&sync1,
		Port::TIM		&tim
		)
: spi_(spi),
  cs_(cs),
  spiIrq_(spiIrq),
  sync0_(sync0),
  sync1_(sync1),
  tim_(tim)
{


}

LAN9252::~LAN9252()
{

}

ErrorStatus LAN9252::Write()
{


}

ErrorStatus LAN9252::Read(uint32_t address)
{
	data[0] = ESC_CMD_FAST_READ;
	data[1] = ((address >> 8) & 0xFF);
	data[2] = (address & 0xFF);
	data[3] = ESC_CMD_FAST_READ_DUMMY;

	cs_.Select();
	spi_.TransmitReceive(spiTxData_, spiRxData_, 4, 100);
	cs_.Release();
}

